<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>SHARE Potential Shelter Sites</title>

  <!---- external libs -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
  <link href="https://api.mapbox.com/mapbox-gl-js/v2.15.0/mapbox-gl.css" rel="stylesheet" />
  <link href="https://cdnjs.cloudflare.com/ajax/libs/noUiSlider/15.7.1/nouislider.min.css" rel="stylesheet" />
  <link href="https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-geocoder/v4.7.2/mapbox-gl-geocoder.css" rel="stylesheet" />

  <style>
    html,body{margin:0;height:100%;font-family:Raleway,sans-serif;background:#f1f1f1}

    /*-- top bar --*/
    .top-bar{position:fixed;top:0;left:0;right:0;height:43px;background:#000;color:#fff;
             display:flex;justify-content:space-between;align-items:center;padding:0 1rem;z-index:1000}
    .filter-btn{background:none;border:none;color:#fff;font-size:1.1rem;cursor:pointer}
    .nav-tabs{display:flex;gap:1.5rem}
    .nav-tabs a{color:#fff;text-decoration:none;font-size:1rem;transition:color .3s}
    .nav-tabs a:hover{color:#00bfff}

    /*-- left filter sidebar --*/
    .sidebar{position:fixed;top:43px;left:0;width:300px;height:calc(100% - 43px);background:#fff;
             transform:translateX(-100%);transition:transform .3s;overflow-y:auto;box-shadow:2px 0 5px rgba(0,0,0,.1);z-index:1001}
    .sidebar.active{transform:translateX(0)}
    .overlay{position:fixed;inset:0;background:rgba(0,0,0,.5);display:none;z-index:1000}
    .overlay.active{display:block}

    /*-- map + right panel wrapper --*/
    .main{position:absolute;top:43px;left:0;right:0;height:calc(100vh - 43px);display:flex}
    .map-container{flex:1;position:relative}
    #map{width:100%;height:100%}
    .geocoder{position:absolute;top:10px;width:100%;display:flex;justify-content:center;z-index:1002}

    /*-- right sidebar (tabs inside) --*/
    .right-sidebar{width:350px;height:100%;background:#fff;overflow-y:auto;
                   box-shadow:-2px 0 5px rgba(0,0,0,.1);padding:1rem}
    /* small tab bar */
    .rs-tabs{display:flex;gap:.25rem;margin-bottom:.5rem}
    .rs-tab{flex:1;background:#eee;border:1px solid #ccc;border-radius:4px 4px 0 0;
            padding:.3rem 0;font-size:.9rem;cursor:pointer;text-align:center}
    .rs-tab.active{background:#fff;border-bottom:1px solid #fff}
    .rs-panel{padding-right:.5rem}

    /*-- filter panel internals --*/
    #sqftSlider{margin:10px 0 20px;max-width:85%}
    .noUi-target{height:7px;background:#ddd;border-radius:3px}
    .noUi-connect{background:#2196f3}
    .noUi-horizontal .noUi-handle{width:8px!important;height:14px!important;top:-3px!important;right:-6px!important;
                                  border-radius:3px;background:#fff;border:2px solid #2196f3;box-shadow:0 0 2px rgba(0,0,0,.15);cursor:pointer}
  </style>
</head>
<body>

  <!---- TOP BAR ---->
  <div class="top-bar">
    <button class="filter-btn" onclick="openSidebar()"><i class="fa fa-bars"></i> Map Filters</button>
    <div class="nav-tabs">
      <a href="https://sites.google.com/sharewheel.org/index/home" target="_blank" rel="noopener noreferrer">SHARE</a>
      <a href="#" onclick="showUserGuide()">User Guide</a>
      <a href="#" onclick="showAbout()">About</a>
    </div>
  </div>

  <!---- LEFT FILTER SIDEBAR ---->
<!-- KEY LEFT-SIDEBAR STYLES (unchanged) -->
<style>
  .sidebar{
    position:fixed;top:43px;left:0;width:300px;height:calc(100% - 43px);
    background:#fff;transform:translateX(-100%);transition:transform .3s;
    overflow-y:auto;box-shadow:2px 0 5px rgba(0,0,0,.1);z-index:1001;
  }
  .sidebar.active{transform:translateX(0)}
  /* everything else is the same as before … */
</style>

<!-- LEFT MAP-FILTER SIDEBAR (unchanged markup) -->
<div id="mySidebar" class="sidebar">
  <div style="padding:1rem;">
    <h3>Map Filters</h3>

    <h4>Property Size</h4>
    <div id="sqftSlider"></div>
    <div class="range-display"><span id="sqftRangeText">500 – 2000 sq ft</span></div>

    <h4>Utilities</h4>
    <label><input type="checkbox"> Gas</label><br>
    <label><input type="checkbox"> Water</label><br>
    <label><input type="checkbox"> Electricity</label><br>
    <label><input type="checkbox"> Restrooms</label><br>
    <label><input type="checkbox"> Sewage</label>

    <h4>Shelter Type</h4>
    <label><input type="checkbox"> Indoor</label><br>
    <label><input type="checkbox"> Outdoor</label>

    <h4>Amenities</h4>
    <label><input type="checkbox"> Shower</label><br>
    <label><input type="checkbox"> Kitchen</label><br>
    <label><input type="checkbox"> Laundry</label>

    <h4>Transit Access</h4>
    <label><input type="checkbox"> Distance to</label><br>
    <label><input type="checkbox"> Stops in distance</label>

    <h4>Nearby Facilities</h4>
    <label><input type="checkbox"> Hospital</label><br>
    <label><input type="checkbox"> School</label><br>
    <label><input type="checkbox"> Grocery Store</label>
  </div>
</div>
  <div id="myOverlay" class="overlay" onclick="closeSidebar()"></div>

  <!---- MAP + RIGHT SIDEBAR ---->
  <div class="main">
    <div class="map-container">
      <div id="geocoder" class="geocoder"></div>
      <div id="map"></div>
    </div>

    <!---- RIGHT SIDEBAR WITH TABS ---->
    <div class="right-sidebar">
      <!-- tab buttons -->
      <div class="rs-tabs">
        <button class="rs-tab active" onclick="showRsTab('infoTab',event)">Info</button>
        <button class="rs-tab"        onclick="showRsTab('dirTab',event)">Site Directory</button>
      </div>

      <!-- panel 1 -->
      <div id="infoTab" class="rs-panel">
        <h3>Sites Information</h3>
        <p>More features will be added to this panel once data is ready.</p>
      </div>

      <!-- panel 2 -->
      <div id="dirTab" class="rs-panel" style="display:none;">
        <h3>Site Directory</h3>
        <p>This panel is under construction.</p>
        <p> Should we put sites in as cards?<p></p>
      </div>
    </div>
  </div>

<!-- ABOUT SECTION -->
<div id="aboutSection"
     style="display:none; padding:2rem; max-width:900px; margin:auto;
            background:white; font-family:Raleway, sans-serif; line-height:1.5;">
  <h1 style="margin-top:0;">About the App</h1>

  <p>
    This web-based GIS application is a private tool for
    <strong>SHARE/WHEEL</strong> staff to map, filter, and annotate
    potential shelter sites across Seattle.  
    It was developed through a partnership between SHARE/WHEEL and the
    <em>GEOG 469 Senior Capstone</em> course at the University of Washington,
    where student teams collaborate with community sponsors to deliver
    professional-grade, real-world solutions.
  </p>

  <hr style="margin:2.5rem 0;">

  <h2 style="margin-top:0;">About the Creators</h2>

  <h4>
    Miles Winarske
  </h4>
  <p></em>
    Geographer &amp; Urban Planner (B.A. Geography – Data Science; Minor in Urban Planning &amp; Design)
  <p></em>
  <p>
    This project taught me to work directly with a client, serving as a creator of ideas presented in multiple meetings with the sponsor. 
    I worked to gather datasets used in this project, worked as the main coordinator with our sponsor, Michele Marchand.
  </p>

  <h4>Aditya Ayappa</h4>
  <p>
    Conducted key data science analysis for datasets
  </p>

  <h4>Ellie Velez</h4>
  <p>
    UX / UI lead responsible for front-end layout
  </p>

  <button onclick="hideAbout()"
          style="margin-top:2.5rem; padding:0.6rem 1.2rem;">
    ← Back to Map
  </button>
</div>

  <!---- USER-GUIDE SECTION ---->
  <div id="userGuideSection" style="display:none;padding:2rem;max-width:800px;margin:auto;
       background:#fff;font-family:Raleway,sans-serif;">
    <h1>User Guide</h1>
    <p>This page is currently under construction.</p>
    <button onclick="hideUserGuide()" style="margin-top:2rem;padding:0.5rem 1rem;">← Back to Map</button>
  </div>

  <!---- SCRIPTS ---->
  <script src="https://api.mapbox.com/mapbox-gl-js/v2.15.0/mapbox-gl.js"></script>
  <script src="https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-geocoder/v4.7.2/mapbox-gl-geocoder.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/noUiSlider/15.7.1/nouislider.min.js"></script>

  <script>
    /* left filters */
    const sidebar = document.getElementById("mySidebar");
    const overlay = document.getElementById("myOverlay");
    function openSidebar(){sidebar.classList.add("active");overlay.classList.add("active");setTimeout(()=>map.resize(),300);}
    function closeSidebar(){sidebar.classList.remove("active");overlay.classList.remove("active");setTimeout(()=>map.resize(),300);}

    /* about / user-guide overlay pages */
    function showAbout(){document.getElementById("aboutSection").style.display="block";
                         document.getElementById("userGuideSection").style.display="none";
                         document.querySelector(".main").style.display="none";}
    function hideAbout(){document.getElementById("aboutSection").style.display="none";
                         document.querySelector(".main").style.display="flex";}
    function showUserGuide(){document.getElementById("userGuideSection").style.display="block";
                             document.getElementById("aboutSection").style.display="none";
                             document.querySelector(".main").style.display="none";}
    function hideUserGuide(){document.getElementById("userGuideSection").style.display="none";
                             document.querySelector(".main").style.display="flex";}

    /* right-sidebar tab switcher */
    function showRsTab(id,evt){
      document.querySelectorAll('.rs-panel').forEach(p=>p.style.display='none');
      document.querySelectorAll('.rs-tab').forEach(b=>b.classList.remove('active'));
      document.getElementById(id).style.display='block';
      evt.currentTarget.classList.add('active');
    }

    /* map + slider */
    mapboxgl.accessToken='pk.eyJ1IjoiZ252ZWxleiIsImEiOiJjbTZzdGZzcWMwYjJzMm5wd2xmYnRyeHU0In0.1qw-r2WipRZcibgMfyoLJw';
    const map=new mapboxgl.Map({container:'map',style:'mapbox://styles/mapbox/streets-v12',
                                center:[-122.335167,47.608013],zoom:10});
    const geocoder=new MapboxGeocoder({
        accessToken:mapboxgl.accessToken,mapboxgl:mapboxgl,marker:true,
        proximity:{longitude:-122.335167,latitude:47.608013},
        bbox:[-122.4594,47.4919,-122.2244,47.7341]});
    document.getElementById('geocoder').appendChild(geocoder.onAdd(map));

    const sqftSlider=document.getElementById('sqftSlider');
    const sqftRangeText=document.getElementById('sqftRangeText');
    noUiSlider.create(sqftSlider,{start:[0,2000],connect:true,step:50,
      range:{min:0,max:5000},
      format:{to:v=>Math.round(v),from:v=>parseInt(v)}});
    sqftSlider.noUiSlider.on('update',vals=>{
      sqftRangeText.textContent=`${vals[0]} – ${vals[1]} sq ft`;
    });
  </script>

</body>
</html>